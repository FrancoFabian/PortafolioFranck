(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["d2d956a9d26c34a2a8904cf9f1d0197e"],{AuwW:function(e,t,b){"use strict";b("ma9I");b("5DmW");b("NBAS");b("07d7");b("5s+n");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;b("ls82");var a=d(b("q1tI"));var i=b("mR6N");var n=s(b("x+rD"));var u=b("skGw");var c=s(b("nVHT"));var r=s(b("CtWX"));var o=s(b("cfQQ"));var v=b("3gDo");var m=s(b("tm9o"));function s(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function f(e,t,n,r,o,a,i){try{var c=e[a](i);var u=c.value}catch(e){n(e);return}if(c.done){t(u)}else{Promise.resolve(u).then(r,o)}}function y(c){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=c.apply(e,i);function o(e){f(r,t,n,o,a,"next",e)}function a(e){f(r,t,n,o,a,"throw",e)}o(undefined)})}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function h(e,t,n){if(t)p(e.prototype,t);if(n)p(e,n);return e}function g(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return P(e)}function w(e){w=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return w(e)}function P(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function O(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)S(e,t)}function S(e,t){S=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return S(e,t)}function j(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var k=function(e){O(o,e);function o(){var e;var h;l(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}h=g(this,(e=w(o)).call.apply(e,[this].concat(n)));j(P(h),"state",{componentInstance:null});j(P(h),"_isMounted",false);j(P(h),"logConversions",function(){var e=h.props,t=e.topic,n=e.scratchpad,r=e.embedded;var o=t.nodeSlug;var a=n.contentKind,i=n.id;var c=a==="Talkthrough"||a==="Challenge";if(!c&&i&&(r||n.originIsProject)){window.setTimeout(function(){(0,u.khanFetch)("/api/internal/user/program/".concat(a,":").concat(i,"/log"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic_slug:o})})},1e3)}});j(P(h),"onInitScratchPad",function(){var e=h.props,a=e.ancestorFeedbackType,i=e.embedded,c=e.domain,u=e.topic,s=e.nextSlug,d=e.profile,t=e.scratchpad,f=t.id,l=t.userAuthoredContentType,p=t.contentKind;h.setState({componentInstance:null});return Promise.all([b.e("corelibs-legacy"),b.e("a4c9f2c8346f59d92cd55f183d0fda98")]).then(b.t.bind(null,"+reu",7)).then(function(){var t=y(regeneratorRuntime.mark(function e(n){var r,o;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=n.ScratchpadUI,o=n.ScratchpadUIStart;if(h._isMounted){t.next=3;break}return t.abrupt("return");case 3:r.ancestorFeedbackType=a;r.termMap=(0,v.getTermMap)(l);t.next=7;return o();case 7:r.init({id:f,embedded:i,domainSlug:c,topic:u,userAuthoredContentType:l,nextSlug:s,profile:d,contentKind:p,onSetComponent:function e(t){var n=false;if(h._isMounted){n=true;h.setState({componentInstance:t})}return n}},m.default);case 8:case"end":return t.stop()}}},e)}));return function(e){return t.apply(this,arguments)}}())});return h}h(o,[{key:"componentDidMount",value:function e(){this._isMounted=true;var t=this.props.topic.nodeSlug;n.default.sendToGA("event","Learning-Action","Scratchpad-View",t);if(!this.props.profileLoading){this.onInitScratchPad()}b.e("5daa4cec15a86c56bcd0f1d273b45483").then(b.t.bind(null,"RtRs",7));b.e("63081905aa191f9d22ff4605cf04d963").then(b.t.bind(null,"dbFz",7));b.e("0c26ece843f0c6cb594109cdc9d4b3cc").then(b.t.bind(null,"kIjF",7));b.e("dc4f1cea1e731c1f7f8e0ff07b58da2b").then(b.t.bind(null,"QaKC",7));b.e("0c26ece843f0c6cb594109cdc9d4b3cc").then(b.t.bind(null,"kIjF",7));this.logConversions()}},{key:"componentDidUpdate",value:function e(t){var n=false;if(t.profileLoading&&!this.props.profileLoading){this.onInitScratchPad();n=true}if(t.scratchpad.id!==this.props.scratchpad.id){if(!n){this.onInitScratchPad()}this.logConversions()}}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}},{key:"render",value:function e(){var t=this.props,n=t.domain,r=t.scratchpad;var o=this.state.componentInstance;return a.createElement("div",{key:r.id,className:(0,i.css)(I.bodyWrapper)},!o&&a.createElement(c.default,null),a.createElement("div",{className:"box-sizing-content-box-reset"},a.createElement("div",{className:"scratchpad-page bibliotron-scratchpad "+"".concat(n,"-scratchpad")},o)))}}]);return o}(a.Component);j(k,"defaultProps",{embedded:true});var I=i.StyleSheet.create({bodyWrapper:{marginLeft:16,marginRight:16}});var T=function e(t){if(t.profileLoading){return a.createElement(r.default,null)}return a.createElement(k,t)};T.defaultProps={embedded:true};var C=(0,o.default)(T);t.default=C}}]);
//# sourceMappingURL=../../sourcemaps/en/d2d956a9d26c34a2a8904cf9f1d0197e.2473c0faef9f2e76f213.js.map