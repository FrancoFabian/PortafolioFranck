(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["24a5f45d0c120d8cd0074ba856585ae4"],{E2UL:function(e,t,a){"use strict";a("ma9I");a("TeQF");a("2B1R");a("+2oP");a("5DmW");a("NBAS");a("hByQ");Object.defineProperty(t,"__esModule",{value:true});t.ProjectFeedbackPage=t.ProjectEvaluationArea=void 0;var n=p(a("e2gc"));var m=p(a("TSYQ"));var w=d(a("q1tI"));var o=p(a("i8i4"));var b=p(a("F/us"));var E=p(a("wa3X"));var y=a("JimW");var g=a("Vxy9");var j=a("DzHr");var i=a("Pk2J");var l=a("qgfM");var r=p(a("/eLw"));var s=a("+reu");var k=p(a("nVHT"));var c=p(a("cfQQ"));var u=p(a("dFiz"));var P=a("gdZe");var S=p(a("SLeZ"));var i18n=d(a("HEOz"));function d(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var a in e){if(Object.prototype.hasOwnProperty.call(e,a)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};if(i.get||i.set){Object.defineProperty(t,a,i)}else{t[a]=e[a]}}}}t.default=e;return t}}function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function v(e,t,a){if(t)h(e.prototype,t);if(a)h(e,a);return e}function O(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return I(e)}function T(e){T=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return T(e)}function I(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function A(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)C(e,t)}function C(e,t){C=Object.setPrototypeOf||function e(t,a){t.__proto__=a;return t};return C(e,t)}function N(e,t,a){if(t in e){Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true})}else{e[t]=a}return e}var F=function(e){A(r,e);function r(){var e;var a;f(this,r);for(var t=arguments.length,i=new Array(t),l=0;l<t;l++){i[l]=arguments[l]}a=O(this,(e=T(r)).call.apply(e,[this].concat(i)));N(I(a),"state",{item:0,allPassed:false});N(I(a),"checkPassState",function(){var i=true;var l=true;var r=false;(0,b.default)(a.objectives).each(function(e){var t=o.default.findDOMNode(this.refs[e]);var a=t?t.value:"";l=l&&(a==="pass"||a==="nopass");i=i&&a==="pass";r=r||a==="nopass"}.bind(I(a)));a.setState({allPassed:i});var e=a.honorcode;var t=i&&e&&e.value.toLowerCase()===e.getAttribute("data-yestext").toLowerCase();if(l&&t&&a.props.handleAllPassed){a.props.handleAllPassed()}if((!l||!t)&&a.props.handleAnyIncomplete){a.props.handleAnyIncomplete()}if(r&&a.props.handleAnyFailed){a.props.handleAnyFailed()}});N(I(a),"handleCheck",function(){var l=0;(0,b.default)(a.objectives).each(function(e,t){var a=this.refs[e];var i=a&&o.default.findDOMNode(a).value;if(i==="pass"){l=t+1}}.bind(I(a)));a.setState({item:Math.max(a.state.item,l)});a.checkPassState()});return a}v(r,[{key:"UNSAFE_componentWillUpdate",value:function e(){if(this.props.willUpdate){this.props.willUpdate()}}},{key:"componentDidUpdate",value:function e(){if(this.props.didUpdate){this.props.didUpdate()}}},{key:"render",value:function e(){var a=this;var t=(0,n.default)(n.default.parseHTML(this.props.rubric)).filter("ul").children();this.objectives=[];var i=null;if(this.state.allPassed){var l=i18n._("S\u00ed");i=w.createElement("li",{style:{margin:"20px 0px 30px 0px"}},w.createElement("label",null,i18n.$_("Certifico que este es mi trabajo original. Si tom\u00e9 cualquier parte de alguna otra fuente, no fueron partes fundamentales del proyecto, y se da el cr\u00e9dito debido al principio. Acepto que estoy de acuerdo con este c\u00f3digo de honor al escribir \"%(yes)s\":",{yes:l}),w.createElement("input",{type:"text",ref:function e(t){return a.honorcode=t},placeholder:l,"data-yestext":l,onChange:this.checkPassState,style:{marginLeft:"5px"}})))}var r=(0,b.default)(t).map(function(e,t){var a="list"+t;this.objectives.push(a);var i=t<=this.state.item;var l={lineHeight:"1.2em",margin:"20px 0",color:i?undefined:"rgb(163, 163, 163)"};return w.createElement("li",{key:"objective-"+t,style:l},(0,n.default)(e).text(),w.createElement("br",null),i?w.createElement("select",{onChange:this.handleCheck,ref:a},w.createElement("option",null),w.createElement("option",{value:"pass"},i18n._("S\u00ed, creo que mi proyecto cumple este objetivo.")),w.createElement("option",{value:"nopass"},i18n._("No, voy a seguir trabajando en ello."))):null)}.bind(this));return w.createElement("div",null,r,i)}}]);return r}(w.Component);var U=function(e){A(i,e);function i(e){var t;f(this,i);t=O(this,T(i).call(this,e));N(I(t),"onBeginEvaluation",function(){t.setState({isExpanded:true})});var a=(0,r.default)(window.location.search);t.state={qaExpandKey:a.qa_expand_key,isExpanded:false};t.evalAnswer=e.collection.getBestEvalAnswer();return t}v(i,[{key:"componentDidUpdate",value:function e(){if(this.scrollTo){var t=o.default.findDOMNode(this.refs[this.scrollTo]);(0,n.default)("html, body").animate({scrollTop:(0,n.default)(t).offset().top-100},1e3);this.scrollTo=""}}},{key:"render",value:function e(){if(!this.evalAnswer){return null}var t=this.evalAnswer;var a=w.createElement(E.default,{kind:"secondary",size:"small",onClick:this.onBeginEvaluation},i18n._("Ver evaluaci\u00f3n"));var i=t.get("key")===this.state.qaExpandKey;if(i&&b.default.isUndefined(this.scrollTo)){this.scrollTo="evalGuideline"}return w.createElement("div",{ref:"evalGuideline",className:"eval-guideline"},w.createElement(S.default,null),w.createElement("div",{className:"eval-left"},i18n._("This project has already been evaluated. "),this.state.isExpanded||i?w.createElement("div",{className:"eval-submitted"},w.createElement(P.ProjectEvalStatusViewer,{model:t,isProgramOwner:false}),w.createElement(P.ProjectEvalReviewContent,{model:t}),w.createElement(P.DiscussionMeta,{model:t})):i18n._("Puedes ver la evaluaci\u00f3n para obtener m\u00e1s informaci\u00f3n.")),w.createElement("div",{className:"eval-button-container"},!this.state.isExpanded&&!i?a:null))}}]);return i}(w.Component);var R=(0,i.compose)((0,u.default)(function(e){var t=[e.collection];var a=e.collection.getBestEvalAnswer();if(a){t.push(a)}return t}))(U);var x=function(e){A(i,e);function i(e){var a;f(this,i);a=O(this,T(i).call(this,e));N(I(a),"onViewObjectives",function(){a.setState({viewObjectives:true})});N(I(a),"onSubmitReviewRequest",function(){a.setState({isSubmitting:true});var l=function(){(0,n.default)(s.ScratchpadUI).off("saveCompleted",l);(0,n.default)(s.ScratchpadUI).off("saveFailed",r);var e=s.ScratchpadUI.scratchpad.get("originSimilarity");var t=s.ScratchpadUI.scratchpad.get("revision");var a=t&&t.get("code");var i=e<.8||e<1&&a.length>=1e3;if(!i){this.setState({isSubmitting:false,showEvalFirstNotice:false,showTooSimilarModal:true});return}s.ScratchpadUI.userScratchpad.save({challengeStatus:5},{patch:true});this.setState({isSubmitting:false,projectFinished:true})}.bind(I(a));var r=function(){(0,n.default)(s.ScratchpadUI).off("saveCompleted",l);(0,n.default)(s.ScratchpadUI).off("saveFailed",r);this.setState({isSubmitting:false,showEvalFirstNotice:false})}.bind(I(a));(0,n.default)(s.ScratchpadUI).on("saveCompleted",l);(0,n.default)(s.ScratchpadUI).on("saveFailed",r);if(s.ScratchpadUI.isSaveable()){s.ScratchpadUI.triggerSave()}});N(I(a),"handleDelete",function(){var e=a.props.collection.getOpenEvalRequest();if(e){var t=a.props.profile;a.props.collection.remove(e);e.destroy({profile:t})}a.hasScrolledForEvalRequest=false;a.handleRubricIncomplete()});N(I(a),"handleRubricPass",function(){a.setState({showEvalFirstNotice:false,viewObjectives:true,selfRubricPassed:true})});N(I(a),"handleRubricFail",function(){a.setState({showEvalFirstNotice:false,viewObjectives:false,selfRubricPassed:false})});N(I(a),"handleRubricIncomplete",function(){a.setState({showEvalFirstNotice:false,viewObjectives:true,selfRubricPassed:false})});N(I(a),"checkWillScroll",function(){var e=o.default.findDOMNode(a.refs.guidelinesView);a.shouldScrollBottom=e.scrollTop+e.offsetHeight===e.scrollHeight});N(I(a),"scrollToBottom",function(){if(a.shouldScrollBottom){var e=o.default.findDOMNode(a.refs.guidelinesView);e.scrollTop=e.scrollHeight}});var t=(0,r.default)(window.location.search);a.state={projectFinished:a.props.projectFinished,qaExpandKey:t.qa_expand_key,isSubmitting:false,viewObjectives:false,fetchedInitial:false,showTooSimilarModal:false};a.evalAnswer=a.props.collection.getBestEvalAnswer();return a}v(i,[{key:"componentDidMount",value:function e(){var t=this.props.collection;if(this.props.sendToPeers&&!this.state.fetchedInitial){var a=function(){this.evalAnswer=this.props.collection.getBestEvalAnswer();this.setState({fetchedInitial:true})}.bind(this);t.fetch({success:a,error:a})}}},{key:"componentDidUpdate",value:function e(){if(this.scrollTo&&this.refs[this.scrollTo]){var t=o.default.findDOMNode(this.refs[this.scrollTo]);(0,n.default)("html, body").animate({scrollTop:(0,n.default)(t).offset().top-100},1e3);this.scrollTo=""}}},{key:"render",value:function e(){var t=this;var a=this.props.collection;if(this.props.sendToPeers&&!this.state.fetchedInitial){return w.createElement("div",{className:"eval-guideline"},w.createElement(k.default,{size:"medium"}))}if(this.evalAnswer&&this.evalAnswer.isPassingEvalAnswer()){var i=this.evalAnswer;var l=i.get("key")===this.state.qaExpandKey;if(l&&b.default.isUndefined(this.scrollTo)){this.scrollTo="evalGuideline"}return w.createElement("div",{ref:"evalGuideline",className:"eval-guideline"},w.createElement(S.default,null),w.createElement(P.ProjectEvalStatusViewer,{model:i,isProgramOwner:true}),w.createElement(P.ProjectEvalReviewContent,{model:i}),w.createElement(P.DiscussionMeta,{model:i}))}if(this.state.projectFinished){var r=w.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.tips||""}});return w.createElement("div",{className:"eval-guideline"},i18n._("Tu proyecto ha sido marcado ahora como completo. Puedes seguir trabajando en \u00e9l, por supuesto, si se te ocurren nuevas maneras de mejorarlo. \u00a1Sigue practicando!"),this.props.tips?r:"")}var n=a.hasEvalRequests()&&!a.hasPassingEvalRequests();var o;var s=null;if(this.state.isSubmitting){o=w.createElement(k.default,{size:"medium"})}else{var c=!this.state.viewObjectives&&!n?this.onViewObjectives:this.onSubmitReviewRequest;var u;if(this.state.showEvalFirstNotice){u=i18n._("\u00a1OK, lo consegu\u00ed! \u00a1Estoy listo para la evaluaci\u00f3n!")}else if(!this.state.viewObjectives||n){u=i18n._("\u00a1Termin\u00e9!")}else{if(this.state.selfRubricPassed){u=i18n._("\u00a1Termin\u00e9 con mi evaluaci\u00f3n!")}}if(u){o=w.createElement(E.default,{size:"small",onClick:c},u)}}if(n&&this.evalAnswer){var d=this.evalAnswer;var p=d.get("key")===this.state.qaExpandKey;if(p&&b.default.isUndefined(this.scrollTo)){this.scrollTo="evalGuideline"}return w.createElement("div",{ref:"evalGuideline",className:"eval-guideline"},w.createElement(S.default,null),w.createElement(P.ProjectEvalStatusViewer,{model:d,isProgramOwner:true}),w.createElement("div",null,w.createElement(P.ProjectEvalReviewContent,{model:d}),w.createElement(P.DiscussionMeta,{model:d})),w.createElement("br",null),i18n._("Trabaja en tu proyecto el tiempo que quieras, luego haz clic en este bot\u00f3n cuando termines."),w.createElement("div",{className:"eval-button-container"},o))}var f;if(this.state.viewObjectives){f=w.createElement("div",null,w.createElement("strong",null,i18n._("\u00bfTu proyecto cumple con estos objetivos?")),w.createElement("ol",{className:"styled-list"},w.createElement(F,{handleAllPassed:this.handleRubricPass,handleAnyFailed:this.handleRubricFail,handleAnyIncomplete:this.handleRubricIncomplete,willUpdate:this.checkWillScroll,didUpdate:this.scrollToBottom,rubric:this.props.rubric})))}else{f=w.createElement("div",null,i18n._("Trabaja en tu proyecto el tiempo que quieras, luego haz clic en este bot\u00f3n cuando termines."),w.createElement("br",null))}var h=w.createElement(j.ModalLauncher,{onClose:function e(){t.setState({showTooSimilarModal:false})},opened:this.state.showTooSimilarModal,modal:function e(t){var a=t.closeModal;return w.createElement(j.OneColumnModal,{content:w.createElement(y.View,null,w.createElement("h3",null,i18n._("Please do some more work first")),w.createElement(g.Body,{tag:"p"},i18n._("Looks like you haven't changed much for this project. Keep working!"))),footer:w.createElement(y.View,null,w.createElement(E.default,{onClick:a},i18n._("Bien")))})}});var v=(0,m.default)({"eval-guideline":true,"eval-guideline-view-objectives":this.state.viewObjectives});return w.createElement("div",{className:v,ref:"guidelinesView"},h,w.createElement("div",{className:"eval-left"},f),w.createElement("div",{className:"eval-button-container"},o,s))}}]);return i}(w.Component);N(x,"defaultProps",{projectFinished:false});var D=(0,u.default)(function(e){var t=[e.collection];var a=e.collection.getBestEvalAnswer();if(a){t.push(a)}return t})(x);var M=function(e){A(a,e);function a(e){var t;f(this,a);t=O(this,T(a).call(this,e));N(I(t),"isCollectionLoaded",function(){var e=t.props.collection;if(e.size()>0&&!t._loaded){t.props.onLoad(e);t._loaded=true}});t.state={collection:e.collection};t._loaded=false;return t}v(a,[{key:"componentDidMount",value:function e(){this.props.collection.on("change",this.isCollectionLoaded);this.isCollectionLoaded()}},{key:"componentDidUpdate",value:function e(t){if(this.props.collection!==t.collection){t.collection.off("change",this.isCollectionLoaded);this.props.collection.on("change",this.isCollectionLoaded);this._loaded=false;this.isCollectionLoaded()}}},{key:"componentWillUnmount",value:function e(){this.props.collection.off("change",this.isCollectionLoaded)}},{key:"render",value:function e(){var t=null;var a=this.props.profile;var i=this.props.isProgramOwner&&this.props.rubric;if(i){t=w.createElement(D,{scratchpadId:this.props.scratchpadId,rubric:this.props.rubric,tips:this.props.tips,sendToPeers:this.props.sendToPeers,originTitle:this.props.originTitle,projectFinished:this.props.projectFinished,collection:this.state.collection,profile:a})}else if(this.state.collection.fetchedInitial&&this.props.sendToPeers||this.state.collection.hasPendingEvalRequests()){t=w.createElement(R,{rubric:this.props.rubric,tips:this.props.tips,collection:this.state.collection,profile:a})}return w.createElement("div",{className:"eval-container"},t)}}]);return a}(w.Component);N(M,"defaultProps",{projectFinished:false,sendToPeers:false,isProgramOwner:false});var L=(0,i.compose)(c.default,(0,u.default)(function(e){return[e.collection]}))(M);t.ProjectEvaluationArea=L;var q=function(e){A(i,e);function i(e){var t;f(this,i);t=O(this,T(i).call(this,e));var a=new l.DiscussionItemCollection([],{topic:t.props.topic.slug,type:"projecthelp",maxAnswers:0});t.helpCollections=[a,new l.DiscussionItemCollection([],{topic:t.props.topic.slug,type:"projecthelp",minAnswers:1}),new l.DiscussionItemCollection([],{topic:t.props.topic.slug,type:"projecthelp"})];return t}v(i,[{key:"render",value:function e(){var t=[i18n._("Sin respuesta"),i18n._("Respondida"),i18n._("Todos los")];var a=w.createElement("div",{className:"projectfeedback-container",key:"helplists"},w.createElement("h2",null,i18n._("Solicitudes de ayuda")),w.createElement("p",null,i18n._("You can browse through recent help requests below. Thank you for the help!")),w.createElement(P.TabbedDiscussionList,{collections:this.helpCollections,labels:t,listType:"projecthelp"}));var i=w.createElement("div",{className:"projectfeedback-container",key:"evallists"},w.createElement("h2",null,i18n._("Evaluaciones de proyecto")),w.createElement(S.default,null));var l=[a,i];if(window.location.hash.slice(1)==="projecteval"){l=[i,a]}return w.createElement("div",null,l)}}]);return i}(w.Component);var B=(0,c.default)(q);t.ProjectFeedbackPage=B}}]);
//# sourceMappingURL=../../sourcemaps/en/24a5f45d0c120d8cd0074ba856585ae4.9c1ede4792481075d1fb.js.map