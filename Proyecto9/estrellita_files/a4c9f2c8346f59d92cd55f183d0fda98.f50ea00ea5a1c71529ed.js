(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["a4c9f2c8346f59d92cd55f183d0fda98"],{"+reu":function(e,t,j){"use strict";j("ma9I");j("fbCW");j("yXV3");j("+2oP");j("5DmW");j("07d7");j("5s+n");j("TWNs");j("JfAA");j("Rm1S");j("UxlC");j("hByQ");j("SYor");Object.defineProperty(t,"__esModule",{value:true});t.ScratchpadUIStart=t.ScratchpadUI=void 0;j("ls82");var F=i(j("e2gc"));var v=a(j("q1tI"));var s=i(j("F/us"));var n=i(j("q1z7"));var o=i(j("7JHY"));var c=i(j("x+rD"));var i18n=a(j("HEOz"));var m=i(j("mXPZ"));var M=i(j("Q8Wn"));var S=i(j("r+gr"));var r=i(j("E9A0"));var N=i(j("iQJ3"));var w=i(j("bLWT"));var b=i(j("Xb39"));var I=j("MRvb");var d=i(j("ChhH"));var u=i(j("wINb"));var C=j("MhIR");var E=j("8crR");var y=i(j("/eLw"));var l=i(j("P6H5"));var f=i(j("NqAJ"));var h=i(j("VszD"));function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(a.get||a.set){Object.defineProperty(t,r,a)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r,a,i,n,o){try{var d=e[n](o);var c=d.value}catch(e){r(e);return}if(d.done){t(c)}else{Promise.resolve(c).then(a,i)}}function g(d){return function(){var e=this,o=arguments;return new Promise(function(t,r){var a=d.apply(e,o);function i(e){p(a,t,r,i,n,"next",e)}function n(e){p(a,t,r,i,n,"throw",e)}i(undefined)})}}function T(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var P=1e3;var L=10*P;var H={dom:{PAGE:".scratchpad-page",EDITOR:".scratchpad-editor",CANVAS_LOADING:".scratchpad-canvas-loading",OUTPUT_FRAME:"#output-frame",ALL_OUTPUT:"#output, #output-frame",DRAG_HANDLE:".scratchpad-drag-handle",SCRATCHPAD_WRAP:".scratchpad-wrap",SCRATCHPAD_WRAP_OUTER:".scratchpad-wrap-outer",CANVAS_WRAP:".scratchpad-canvas-wrap",EDITOR_WRAP:".scratchpad-editor-wrap",NOTICE_CONTAINER:".spinoff-notice",NOTICE_TEXT:".spinoff-text",NOTICE_BUTTON:".spinoff-notice a"},noOutput:{document:true},forceRedirect:function e(t){H.triggerRemove();(0,F.default)(window).unbind("beforeunload.scratchpad");var r={url:t};(0,F.default)(H).trigger("redirect",r);top.location.href=r.url},initKeybindings:function e(){(0,F.default)(document).off("keydown",k);(0,F.default)(document).on("keydown",k)},canEditCurrentScratchpad:function e(){return H.scratchpad.isNew()||H.scratchpad.isOwner()||m.default.hasAnyPermissions},inEditMode:function e(){return!H.embedded},hasEditor:function e(){var t=H.embedded&&H.scratchpad.get("canvasOnly");return!t},shouldDisableChallengePaste:function e(){return H.scratchpad.get("defaultUrlPath")&&H.scratchpad.get("defaultUrlPath").indexOf("/programming/")>-1},handleStartOver:function e(){var t=H.isRedirectedProjectFork?H.originScratchpad:H.scratchpad;var r=t.getCode();H.liveEditor.editor.text(r);(0,F.default)(H).trigger("startCodeOver")},handleUndo:function e(){H.liveEditor.editor.undo();H.liveEditor.editor.focus()},handleToggleProp:function e(t){var r=H.scratchpad;r.save(T({},t,!r.get(t)),{patch:true})},handleDelete:function e(){return new Promise(function(e,t){H.scratchpad.destroy({success:function e(){H.forceRedirect(H.topic.relativeUrl)},error:t})})},setTitle:function e(a){return new Promise(function(e,t){var r=H.scratchpad;r.setTitle(a);if(r.get("userAuthoredContentType")==="webpage"){H.updateCodeFromScratchpadTitle()}e()})},handleSaveScratchpad:function e(d){return new Promise(function(n,o){H.liveEditor.getScreenshot(function(e){var t=H.scratchpad;var i=t.isNew();if(d){t=t.fork()}var r=t.currentRevision();var a={code:H.liveEditor.editor.text(),editor_type:H.liveEditor.options.editorType,folds:H.liveEditor.editor.getAllFolds(),image_url:e,config_version:t.getVersion(),topic_slug:H.topicSlug};(0,F.default)(H).trigger("saveData",a);r.set(a);t.save({},{success:function e(t){if(i){N.default.del(H.localStorage.SCRATCHPADS)}c.default.sendToGA("event","Learning-Action","Scratchpad-Saved",t.get("title"));if(d&&H.scratchpad.isProject()){H.stashUserCode(null,"")}var r=t.attributes;var a=r.userAuthoredContentType;if(a==="document"){H.liveEditor.editor.text(t.currentRevision().attributes.code)}if(d||i){H.forceRedirect(t.pathForShow())}(0,F.default)(H).trigger("saveCompleted",t);n()},error:function e(t,r){if(r.status===413){o(i18n._("Tu creaci\u00f3n es demasiado grande. Por favor reduce el contenido e intentalo de nuevo."))}else{o(i18n._("Hubo un error al guardar tu creaci\u00f3n en el servidor. \u00a1Por favor int\u00e9ntalo nuevamente!"))}(0,F.default)(H).trigger("saveFailed")}})})})},registerCodeRun:function e(t){(0,F.default)(H).on("runCode",t)},registerCodeChange:function e(t){(0,F.default)(H).on("codeChange",s.default.debounce(t,300))},registerUserCodeChange:function e(t){(0,F.default)(H).on("userChangedCode",s.default.debounce(t,300))},registerPlayUpdate:function e(t){H.liveEditor.record.bind({playUpdate:function e(){t(H.liveEditor.record.currentTime()/1e3)}})},onSeekStart:function e(){H.wasPlaying=H.liveEditor.record.playing;H.liveEditor.record.seeking=true;H.liveEditor.record.pausePlayback()},onSeek:function e(t){H.liveEditor.record.trigger("beforeSeek");H.liveEditor.seekTo(t)},onSeekEnd:function e(){H.liveEditor.record.seeking=false;if(H.wasPlaying){H.liveEditor.record.play()}},isSpinOffAllowed:function e(){var t=H.scratchpad;var r=t.isChallenge();var a=r&&!H.userScratchpad.get("isComplete");return!(t.isNew()||a||H.isRedirectedProjectFork)},hasUnsavedChanges:function e(){var t=H.scratchpad;var r=H.liveEditor.editor.text();var a=H.isSaveable()||!t.isTalkie()&&H.isSpinOffAllowed();var i=t.getCode();if(H.stashedCode){i=H.stashedCode}return a&&F.default.trim(r)!==F.default.trim(i)},isSaveable:function e(){return H.inEditMode()&&H.canEditCurrentScratchpad()||H.isRedirectedProjectFork},triggerSave:function e(){if(H._saveHandler){H._saveHandler()}},triggerSpinOff:function e(){if(H._spinOffHandler){H._spinOffHandler()}},loadDocumentationScratchpads:function e(){if(H._loadingDocumentationScratchpads||!H.liveEditor.hasFrame()){return}H._loadingDocumentationScratchpads=true;F.default.get("/api/internal/scratchpads/documentation/titles",function(e){H.liveEditor.postFrame({documentation:e})})},displayLanguageAllowsEditing:function e(){return H.scratchpad&&(!H.scratchpad.get("category")||M.default.kaLocale==="en")},getHostName:function e(){return window.location.host.toLowerCase()},isProdServer:function e(){var t=this.getHostName();return/khanacademy\.org/.test(t)||/khan-academy\.appspot\.com/.test(t)},prefixDomain:function e(t){if(this.isProdServer()){var r=this.getHostName();var a=/^(.*)-dot-khan-academy\.appspot\.com/.test(r)?RegExp.$1:"www";return"https://"+a+".kasandbox.org"+t}return t},sandboxUrl:function e(){var t=H.scratchpad.get("userAuthoredContentType");var r="/computer-programming/exec/".concat(t);if(t==="document"){return""}if(t in H.noOutput){return r}if(r.indexOf("lang=")<0){r+="?lang="+M.default.kaLocale}r=this.prefixDomain(r);return r},loadData:function e(t,r,a,i){var n=(r||"scratchpad").toLowerCase();var o="/api/internal/show_".concat(n,"?").concat(n,"_id=").concat(t,"&casing=camel");if(i){o+="&allow_redirect=1"}F.default.ajax({type:"GET",url:o,data:{topic_slug:H.topicSlug},success:function e(t){if(r==="Project"){t.scratchpad=t.scratchpad.project||t.scratchpad.spinoff}a(t);delete H.requestedScratchpadID},error:function e(){window.alert(i18n._("No pudimos cargar el programa, \u00bfpuedes intentar de nuevo?"))}})},getTabFromFeedbackType:function e(t){if(t==="projecthelp"){return"projectfeedback"}if(t==="comment"){return"comments"}if(t==="projecteval"||t==="projectevalanswer"){return""}return"questions"},init:function e(r,a){r=r||{};var t=r,i=t.profile;var n=i&&i.get("userId");this.currentUserKaid=i&&i.get("kaid");H.topicSlug=r.scratchpad&&r.scratchpad.forkedFromTopic||r.topic.slug||"computer-programming";var o="cs-scratchpad-new"+n;if(r.userAuthoredContentType){o+="-"+r.userAuthoredContentType}H.localStorage=F.default.extend(H.localStorage||{},{SCRATCHPADS:o});var d=/\/(\d+)(\/embedded)?$/.exec(window.location.pathname);r.id=r.id||d&&d[1]||"";r.embedded=d&&d[2]||r.embedded||H.embedded;if(!r.id){var c=/([A-Za-z]+):(\w+)(\/embedded)?$/.exec(window.location.pathname);if(c){r.contentKind=c[1];r.id=c[2];r.embedded=true}}H.embedded=r.embedded;H.topic=r.topic;H.nextSlug=r.nextSlug||H.nextSlug;var s=(0,y.default)(window.location.search.slice(1));if(!r.scratchpad&&r.id){H.requestedScratchpadID=r.id;return H.loadData(r.id,r.contentKind,function(e){for(var t in e){if(!r[t]){r[t]=e[t]}}H.init(r,a)},r.embedded&&!s.disallowRedirect)}var u=r.el||".scratchpad-page";H.$el=u?(0,F.default)(u):(0,F.default)(document);H.el=H.$el[0];H.$el.off();H.isRedirectedProjectFork=!!(H.requestedScratchpadID&&r.scratchpad&&String(H.requestedScratchpadID)!==String(r.scratchpad.id));if(r.scratchpad){H.scratchpad=new C.Scratchpad;H.scratchpad.set(H.scratchpad.parse(r.scratchpad))}else{var l=H.termMap["new"];H.scratchpad=new C.Scratchpad({title:l,translatedTitle:l,category:null,difficulty:null,tags:[],userAuthoredContentType:r.userAuthoredContentType,topicId:r.topic.id,revision:new C.ScratchpadRevision({code:H.termMap["code"]||"",created:new Date})});var f=N.default.get(H.localStorage.SCRATCHPADS);if(f){var h=H.scratchpad.parse(f.scratchpad);var p=h.revision&&h.revision.get("code");if(p){H.scratchpad.set(h)}}}H.userScratchpad=new C.UserScratchpad({scratchpadId:H.scratchpad.get("id"),scratchpadKind:H.scratchpad.get("contentKind")});H.originScratchpad=new C.Scratchpad;if(r.originScratchpad){H.originScratchpad.set(H.originScratchpad.parse(r.originScratchpad))}var g=H.scratchpad;H.trusted=r.embedded;H.localStorage=F.default.extend(H.localStorage||{},{SEEN_COMPLETED_PROJECT:"cs-scratchpad-seen-completed"+n+"-"+g.get("id")});var v=g.get("userAuthoredContentType");H.challenge=null;if(g.isChallenge()){H.challenge=new E.ScratchpadChallenge({userScratchpad:H.userScratchpad,contentType:v})}var m=document.documentElement;if(s.editor==="no"){m.className+=" no-editor"}if(s.output==="no"){m.className+=" no-output"}if(s.buttons==="no"){m.className+=" no-buttons"}if(s.author==="no"){m.className+=" no-author"}if(s.blank==="yes"){H.blank=true}var S=r.embedded||"upVoted"in r;var w=H.initUserScratchpad(r);if(r.id&&(!S||!w)){if(!(g.isChallenge()||g.isProject()||g.isTalkie())){return H.startScratch(s,r,false,a)}H.loadData(r.id,r.contentKind,function(e){H.initUserScratchpad(e);H.startScratch(s,r,false,a)})}else{H.startScratch(s,r,false,a)}},initLiveEditor:function e(a,t){var r=H.scratchpad;var i=r.currentRevision();var n=r.get("userAuthoredContentType");var o;var d=true;var c={};if(a.autoFocus==="no"){d=false}if((0,F.default)(window).width()<=1024){d=false}if(a.settings){try{c=JSON.parse(a.settings)}catch(e){}}var s=N.default.get(H.localStorage.SCRATCHPADS);if(s){o=s.cursor}var u,l,f;try{u=window.parent;l=a.origin||u.location.origin}catch(e){}var h=function e(t){if(u&&l&&u!==window){t.id=f||a.id||"";try{u.postMessage(JSON.stringify(t),l)}catch(e){}}};var p="";if(!H.blank&&!a.code){p=a.code||r.getCode()||""}var g=r.getPlayback();if(g){g=JSON.parse(g)}var v;if(r.isResizableType()){v=H.hasEditor()?"50%":"100%"}var m=parseFloat(a.width)||v||r.get("width")||400;var S=parseFloat(a.height)||r.get("height")||400;var w;if(r.isTalkie()){w=window.setTimeout(function(){if(!H.liveEditor.audioReadyToPlay()){H.$el.find(".scratchpad-editor-youtube-link").show()}},15*1e3)}var b=H.prefixDomain("/third_party/javascript-khansrc/live-editor/build/images/");if(n==="webpage"){b="https://www.kasandbox.org/programming-images/"}var C="ace";var E=S;if(n==="document"){C="textarea";S="auto";E="auto"}var y;if(r.get("contentKind")==="Talkthrough"){y=r.get("translatedMp3Url")}else{y=i.getMp3Url()}var T;if(r.get("contentKind")==="Challenge"){T=r.get("translatedTests")}H.liveEditor=new H.LiveEditor({el:H.$el,editorType:C+"_"+n,outputType:n,width:m,height:S,editorHeight:E,newErrorExperience:true,autoFocus:d,code:p,validation:T,version:r.get("configVersion"),cursor:o,settings:c,recordingMP3:y,recordingCommands:g&&g.commands,recordingInit:g&&g.init,workersDir:H.prefixDomain("/third_party/javascript-khansrc/live-editor/build/workers/"),externalsDir:H.prefixDomain("/third_party/javascript-khansrc/live-editor/build/external/"),soundsDir:"https://www.kasandbox.org/programming-sounds/",imagesDir:b,jshintFile:H.prefixDomain((M.default.kaLocale!=="en"?"/genfiles/translations/"+M.default.kaLocale:"")+"/third_party/javascript-khansrc/live-editor/"+"build/external/jshint/jshint.js"),redirectUrl:(0,I.toAbsoluteUrl)("/computer-programming/link_redirector"),execFile:H.sandboxUrl(),enableLoopProtect:!r.get("canvasOnly")});if(r.isChallenge()){H.challenge.setLiveEditor(H.liveEditor)}H.$el.addClass("editor-"+C);if(C==="textarea"){var P={forcePasteAsPlainText:false,toolbar:[["Undo"],["Bold","Italic","Underline","-","RemoveFormat"],["Format"],["NumberedList","BulletedList"],["Link","Unlink"],["Drawing"]],plugins:["format","list","drawing"]};var k=H.$el.find(".textarea-editor")[0];Promise.all([j.e("corelibs"),j.e("shared"),j.e("react-components"),j.e("e8539f2e7e0525eb6ff7588bfa94cbf3"),j.e("48abeff682e966bcd4298d20048bb13d")]).then(j.t.bind(null,"W4aj",7)).then(function(e){return e.default}).then(function(e){e.whenReady(function(){e.createEditor(k,P,{_onChangeField:function e(t){t.editor.updateElement()}},t.profile)})})}H.liveEditor.editor.on("change",function(){return(0,F.default)(H).trigger("codeChange")});H.liveEditor.on("userChangedCode",function(){(0,F.default)(H).trigger("userChangedCode")});H.liveEditor.on("readyToPlay",function(){(0,F.default)(H).trigger("readyToPlay");window.clearTimeout(w);H.$el.find(".scratchpad-editor-youtube-link").hide()});H.liveEditor.on("canvasSizeUpdated",function(e){var t=e.width;var r=e.height;H.$el.find(H.dom.CANVAS_WRAP).width(t);H.$el.find(H.dom.DRAG_HANDLE).find("div").height(r);if(H.embedded){if(a.editor==="no"){(0,F.default)("html").width(t).height(r)}else if(a.editor==="yes"){(0,F.default)("html").width(820)}}});H.liveEditor.trigger("canvasSizeUpdated",{width:m,height:S});H.liveEditor.listenTo(r,"change:width change:height",function(){H.liveEditor.updateCanvasSize(r.get("width"),r.get("height"));if(n!=="document"){H.liveEditor.restartCode()}});H.liveEditor.off("update").on("update",function(e){if(e.results&&u&&e.pass!==undefined){h({testsPassed:e.pass},"*")}else if(e.action==="link-click"){var t=i18n._("El enlace en el que hiciste clic estaba en una p\u00e1gina web creada por un usuario. \u00bfEst\u00e1s seguro de que quieres visitar el siguiente sitio?\n%(url)s",{url:e.url});if(confirm(t)){window.open(e.url)}}else if(e.action==="page-info"){if(!H.trusted){var r=e.title||H.termMap["new"];H.scratchpad.setTitle(r)}}else if(e.action==="sql-table-click"){var a=H.liveEditor.editor.text();a=F.default.trim(a)+"\nSELECT * FROM "+e.table+";";H.liveEditor.editor.text(a)}(0,F.default)(H).trigger("update",e)});H.liveEditor.on("runCode",function(e){(0,F.default)(H).trigger("runCode",e)});var A=H.liveEditor.record;var O=undefined;var R=undefined;var x=function e(){clearInterval(R);R=undefined;O=undefined};var U=function e(){x();O=A.currentTime();R=setInterval(function(){return D(A.currentTime())},L)};var D=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(O===undefined){return}var i=H.scratchpad.id;var n=t-O;if(n<1){return}var o={content_kind:H.scratchpad.get("contentKind"),user_sp_id:H.userScratchpad.id,last_ms_watched:t,ms_watched:n,ms_duration:A.endTime(),fully_watched:r?1:0,update_progress:a?1:0};var d="/api/internal/_mt/user/talkthroughs/".concat(i,"/log");F.default.ajax({type:"POST",url:d,data:o}).then(function(e){if(a){H.userScratchpad.set(e)}});O=t};A.on({beforeSeek:function e(){D(A.currentTime());x()},playStarted:function e(){U()},playPaused:function e(){if(A.currentTime()===0){return}D(A.currentTime(),false,true);x()},playEnded:function e(){D(A.endTime(),true,true);x()}})},initUserScratchpad:function e(t){if(t.userScratchpad){H.userScratchpad.set(H.userScratchpad.parse(t.userScratchpad));return true}},initResizing:function e(){if(H.scratchpad.isResizableType()){var o=400;var d=410;var r=(0,F.default)(this.dom.DRAG_HANDLE);var a=(0,F.default)(this.dom.OUTPUT_FRAME);var c=(0,F.default)(this.dom.SCRATCHPAD_WRAP);r.on("mousedown",function(e){var i=e.pageX;var n=a.width();var t=s.default.throttle(function(e){var t=e.pageX-i;if(c.css("direction")==="rtl"){t=-t}var r=n-t;var a=c.width();if(r<o){r=o}else if(a-r<d){r=a-d}H.liveEditor.updateCanvasSize(r);return false},30);r.addClass("dragging");a.css("pointer-events","none");(0,F.default)(document).on("mousemove",t);(0,F.default)(document).one("mouseup",function(){(0,F.default)(document).off("mousemove",t);r.removeClass("dragging");a.css("pointer-events","auto")})});r.show()}},triggerRemove:function e(){(0,F.default)(H).trigger("remove")},updateCodeFromScratchpadTitle:function e(){var t=H.scratchpad.get("translatedTitle");var r=H.liveEditor.editor.text();var a=/(<title\b[^>]*>)[^<>]*(<\/title>)/i;var i=r.match(a);if(!i){return}H.liveEditor.editor.setReadOnly(true);window.setTimeout(function(){H.liveEditor.editor.setReadOnly(false)},500);t="<title>"+t+"</title>";H.liveEditor.editor.editor.replace(t,{needle:i[0]})},termMap:{},renderScratchpad:function e(t,r,a,i){var n=r.profile;var o=H.scratchpad;var d=o.currentRevision();var c=o.get("userAuthoredContentType");H.liveEditor=null;var s=new Promise(function(t,e){var r=function e(){if(H.liveEditor&&H.liveEditor.record){t(H.liveEditor)}else{window.setTimeout(e,10)}};r()});var u="allow-pointer-lock allow-same-origin allow-scripts";if(c==="webpage"){u+=" allow-popups allow-modals allow-forms"}var l=o.isChallenge()&&!(H.userScratchpad&&H.userScratchpad.get("isComplete"));var f={scratchpad:o,userScratchpad:H.userScratchpad,originScratchpad:r.originScratchpad&&new C.Scratchpad(r.originScratchpad),creatorProfile:r.creatorProfile&&new w.default(r.creatorProfile),discussion:r.discussion,challenge:H.challenge,userAuthoredContentType:r.userAuthoredContentType,nextSlug:H.nextSlug,liveEditorPromise:s,embedded:!!r.embedded,embeddedAndWithFrame:r.embedded&&/\/embedded$/.test(window.location.pathname),appVersion:S.default.staticVersion,sandboxUrl:H.sandboxUrl(),inEditModeAndCanEdit:H.inEditMode()&&H.canEditCurrentScratchpad(),canEdit:H.canEditCurrentScratchpad(),isDeveloper:m.default.hasAnyPermissions,isOwner:o.isOwner(),isModerator:!!(n&&n.get("isModerator")&&!H.isRedirectedProjectFork),profileRoot:n&&n.get("profileRoot"),translatedDescription:o.get("translatedDescription"),translatedTitle:o.get("translatedTitle"),isNew:o.isNew(),isDocumentation:o.get("category")==="documentation",isOfficial:o.isOfficial(),isProject:o.isProject(),isChallenge:o.isChallenge(),isUneditableProjectFork:!!(o.get("originIsProject")&&!H.canEditCurrentScratchpad()),hasAudio:o.isTalkie(),lastUpdatedTime:d.get("created").toISOString(),sandboxProps:u,youtubeUrl:o.getYoutubeUrl(),hasUnsavedChanges:function e(){return H.hasUnsavedChanges()},shouldHideRestart:O,showShareButton:!o.isNew()&&(!n||!n.get("isChildAccount")),showProjectEvalArea:!!(n&&o.get("originIsProject")),showProjectHelpButton:!!(n&&!n.get("isChildAccount")&&(o.isOwner()&&!o.isTalkie()&&!o.isChallenge()||o.isProject())),showStartOverButton:o.isChallenge()||H.isRedirectedProjectFork,hideSave:!H.inEditMode()&&!o.isChallenge()&&!H.isRedirectedProjectFork,showDescription:!!(o.get("translatedDescription")||o.isProject()||o.get("originIsProject")),hideDocumentation:!H.hasEditor(),hideSpinOffs:o.isNew()||H.isRedirectedProjectFork||l||!H.hasEditor(),hideDiscussion:o.isNew()||l,hideEditor:!H.hasEditor()||t.editor==="no",hideVotes:H.isRedirectedProjectFork||o.inTutorial(),hideVoteControls:H.isRedirectedProjectFork||o.inTutorial(),hideEditTitle:H.isRedirectedProjectFork,hideDelete:H.isRedirectedProjectFork,isRedirectedProjectFork:H.isRedirectedProjectFork,isSaveable:H.isSaveable(),isSpinOffAllowed:H.isSpinOffAllowed,useContentHeader:!!r.embedded,onToggleProp:H.handleToggleProp,onStartOver:H.handleStartOver,onTriggerSpinoff:H.triggerSpinOff,onUndo:H.handleUndo,onSave:H.triggerSave,onSeekStart:H.onSeekStart,onSeek:H.onSeek,onSeekEnd:H.onSeekEnd,setTitle:H.setTitle,deleteScratchpad:H.handleDelete,saveScratchpad:H.handleSaveScratchpad,registerCodeRun:H.registerCodeRun,registerCodeChange:H.registerCodeChange,registerUserCodeChange:H.registerUserCodeChange,registerTriggerSave:function e(t){return H._saveHandler=t},registerTriggerSpinOff:function e(t){return H._spinOffHandler=t},registerPlayUpdate:H.registerPlayUpdate,newTitle:H.termMap["new"],restartLabel:H.termMap["restart"],domain:r.domain,topic:r.topic,topicSlug:H.topicSlug,isComputerProgramming:r.topic.slug==="computer-programming",private:!!o.get("byChild"),scratchpadKey:o.get("key")};if(!o.get("byChild")&&o.get("key")){var h={sumVotesIncremented:o.get("sumVotesIncremented"),voteUpOnly:true,upVoted:r.upVoted,scratchpadKey:o.get("key"),showModControls:!!(n&&n.get("isModerator")),flags:o.get("flags"),flaggedBy:o.get("flaggedBy"),flaggedByUser:r.flaggedByUser,numberOfFlags:o.get("flags").length,flagButton:true,definitelyNotSpam:o.get("definitelyNotSpam"),hideFlagControls:o.inTutorial()||o.isCategorySet(),showAuthorControls:o.isOwner(),inQueue:false,hideModDelete:o.isOwner()||m.default.hasAnyPermissions};f.discussionMeta=h}if(!r.embeddedAndWithFrame){if(!r.discussion){r.discussion={}}if(t.qa_expand_key&&H.ancestorFeedbackType){r.discussion.expandFeedbackType=H.getTabFromFeedbackType(H.ancestorFeedbackType);r.discussion.qaExpandKey=t.qa_expand_key}}var p=r.onSetComponent;if(p){var g=p(v.createElement(a,f));if(!g){return}H.startScratch(t,r,true,a);return}(0,F.default)(H).trigger("render");(0,b.default)(v.createElement(a,f),H.$el[0],function(){if(i){i()}})}};t.ScratchpadUI=H;function k(e){if(!F.default.browser.msie&&e.which===8&&!(0,F.default)(e.target).is(":input")&&(0,F.default)(e.target).closest("[contenteditable=true]").length===0){e.preventDefault()}if(e.which===83&&(e.ctrlKey||e.metaKey)){if(H.isSaveable()){H.triggerSave()}e.preventDefault()}}H.initAndBind=function(){var e=this;if(A()){return}(0,F.default)(H).trigger("load");e.$el.on("click",".fork",function(e){if((0,F.default)(e.target).hasClass("discussion-author")){(0,F.default)(H).trigger("clickedSpinoffAuthor")}else{(0,F.default)(H).trigger("clickedSpinoff")}});e.$el.on("click",".hover-card-content a",function(){(0,F.default)(H).trigger("clickedSpinoffAuthor")});(0,F.default)(window).unbind("beforeunload.scratchpad");(0,F.default)(window).bind("beforeunload.scratchpad",function(){H.triggerRemove();if(!H.scratchpad.isNew()){var e={defaultMsg:i18n._("Hay cambios sin guardar. \u00bfEst\u00e1s seguro de que deseas salir de la p\u00e1gina?")};if(H.hasUnsavedChanges()){e.warnMsg=e.defaultMsg}(0,F.default)(H).trigger("beforeunload",e);return e.warnMsg}})};H.isAttemptingSomething=function(){if(H.embedded&&!H.inEditMode()){return true}return!H.canEditCurrentScratchpad()};H.stashUserCode=function(e,t){if(!H.liveEditor){return}if(s.default.isUndefined(t)){t=H.liveEditor.editor.text()}var r=H.userScratchpad;e=e||{};var a=s.default.extend({stashedCode:t},e.attrs||{});a["scratchpadId"]=r.get("scratchpadId");e.attrs=a;r.save(a,e);H.stashedCode=t};var A=function e(){var t=(0,y.default)(window.location.search.slice(1));var r=H.scratchpad.get("defaultUrlPath");if(r&&!H.embedded&&!H.canEditCurrentScratchpad()&&!t.no_redirect){H.forceRedirect(r+window.location.search);return true}return false};H.startScratch=function(r,a,e,t){var i=function e(){H.initLiveEditor(r,a);H.initAndBind();H.initKeybindings();var t={code:""};(0,F.default)(H).trigger("initCode",t);H.stashedCode=t.code;if(H.stashedCode){H.liveEditor.editor.text(H.stashedCode)}(0,F.default)(H).trigger("started")};if(!e){H.renderScratchpad(r,a,t,function(){if(!a.onSetComponent){i()}})}else if(a.onSetComponent){i()}};var O=function e(){var t=H.liveEditor.editor.text();var r=H.scratchpad.get("userAuthoredContentType");if(r==="webpage"){if(t.match(/<script>/)||t.match(/animation:/)){return false}}else if(r==="pjs"){var a=["function(){var draw = function(){};}","function(){draw = function(){};}","function(){var mousePressed = function(){};}","function(){var mouseReleased = function(){};}","function(){var mouseMoved = function(){};}","function(){var mouseClicked = function(){};}","function(){var keyPressed = function(){};}","function(){mousePressed = function(){};}","function(){mouseReleased = function(){};}","function(){mouseMoved = function(){};}","function(){mouseClicked = function(){};}","function(){keyPressed = function(){};}","function(){random();}","function(){var _ = new Random();}","function(){var _ = random();}"];try{for(var i=0;i<a.length;i++){if(H.Structured.match(t,a[i])){return false}}return true}catch(e){}}return true};var R=function(){var t=g(regeneratorRuntime.mark(function e(){var r,a,i;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:window.Handlebars=o.default;window.Backbone=n.default;window._=s.default;t.next=5;return j.e("1b62996829997904901599ed08d4e014").then(j.t.bind(null,"ZaBc",7));case 5:t.next=7;return j.e("83bb0a2ff541e8c93a976614459614b0").then(j.t.bind(null,"VscY",7));case 7:t.next=9;return j.e("645bc54023f86055357dca7df012e478").then(j.t.bind(null,"z/9C",7)).then(function(e){return e.default});case 9:r=t.sent;t.next=12;return Promise.all([j.e("894115dd3fcb9c06bd03927225edec3b"),j.e("00ddd0024831066974251d8ccbea3640")]).then(j.t.bind(null,"6ZeH",7)).then(function(e){return e.default});case 12:a=t.sent;t.next=15;return(0,d.default)((0,u.default)("/third_party/javascript-khansrc/live-editor/build/js/live-editor.editor_ace_deps.js"));case 15:t.next=17;return j.e("110bcaaa8b10cceab8f1139abc087d95").then(j.t.bind(null,"XkaS",7));case 17:t.next=19;return j.e("cb3dd66e0afdd0a9797706f6b50cc01d").then(j.t.bind(null,"3Owj",7));case 19:t.next=21;return j.e("18d15c1bfe88f65abeadba803b007f80").then(j.t.bind(null,"hz+2",7));case 21:i=r.LiveEditor;i.prototype.render=function(){};H.LiveEditor=i;H.Structured=a;l.default.bindEvents(H);f.default.bindEvents(H);h.default.bindEvents(H);(0,F.default)(H).on({started:function e(){H.registerCodeChange(function(){H.loadDocumentationScratchpads()});var t=H.liveEditor.editor;t.on("click",function(){var e=H.scratchpad.isTalkie();if(e&&!H.liveEditor.record.playing||!e){t.insertNewlineIfCursorAtEnd()}});var r=H.scratchpad.getFolds();H.liveEditor.editor.setFolds(r);H.initResizing()}});(0,F.default)(H).on("remove",function(){if(!H.liveEditor){return}H.liveEditor.remove();var e=H.scratchpad;var t=H.liveEditor.editor.text();var r=e.currentRevision();if(e.isNew()){r.set("code",t);N.default.set(H.localStorage.SCRATCHPADS,{cursor:H.liveEditor.editor.getCursor(),scratchpad:H.scratchpad})}});case 30:case"end":return t.stop()}}},e)}));return function e(){return t.apply(this,arguments)}}();t.ScratchpadUIStart=R;window.ScratchpadUI=H;r.default.LegacyRequireIfLoaded["ScratchpadUIModule"]={ScratchpadUI:H,ScratchpadUIStart:R}},NqAJ:function(e,t,r){"use strict";r("fbCW");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var d=i(r("e2gc"));var a=i(r("F/us"));var c=i(r("iQJ3"));function i(e){return e&&e.__esModule?e:{default:e}}var n=a.default.once(function(i){var n=function e(){return i.isAttemptingSomething()&&(i.scratchpad.isProject()||i.isRedirectedProjectFork)};var r=function e(){if(i.isRedirectedProjectFork&&i.isSaveable()){i.triggerSave()}else{i.stashUserCode()}i.userScratchpad.startInactivityTimer()};var o=a.default.debounce(r,3e3);d.default.extend(i.dom,{PROJECT_REQ_EVAL_BUTTON:".request-eval-button",PROJECT_EVAL_BUTTON:".eval-button-container .kui-button"});(0,d.default)(i).on({started:function e(t){if(!n()){return}var r=i.liveEditor.editor;r.on("change",function(){o()});this.$el.on("click",this.dom.PROJECT_REQ_EVAL_BUTTON,function(e){(0,d.default)(i.dom.PROJECT_EVAL_BUTTON)[0].click()});this.$el.on("click",this.dom.PROJECT_EVAL_BUTTON,function(e){i.userScratchpad.saveChallengeTimeTaken()});var a=function e(){if(i.userScratchpad.get("challengeStatus")===5){if(!c.default.get(i.localStorage.SEEN_COMPLETED_PROJECT)){c.default.set(i.localStorage.SEEN_COMPLETED_PROJECT,1)}i.$el.find(i.dom.PROJECT_REQ_EVAL_BUTTON).hide()}};i.userScratchpad.on("change:challengeStatus",function(e,t){a()});a();i.userScratchpad.setChallengeTimeTaken();i.userScratchpad.startInactivityTimer()},initCode:function e(t,r){if(!n()||i.isRedirectedProjectFork){return}r.code=i.userScratchpad.get("stashedCode")},remove:function e(t){if(!n()){return}i.userScratchpad.saveChallengeTimeTaken();r()}})});var o={bindEvents:n};t.default=o},P6H5:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=n(r("e2gc"));var a=n(r("F/us"));function n(e){return e&&e.__esModule?e:{default:e}}var o=a.default.once(function(a){(0,i.default)(a).bind({beforeunload:function e(t,r){if(r.warnMsg&&a.liveEditor.record.playing){r.warnMsg=undefined}},remove:function e(){if(a.liveEditor.player){a.liveEditor.player.destruct();a.liveEditor.record.stopPlayback()}a.liveEditor.recordHandlersBound=false}})});var d={bindEvents:o};t.default=d},VszD:function(e,t,r){"use strict";r("fbCW");r("5DmW");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var c=i(r("e2gc"));var s=i(r("F/us"));var i18n=a(r("HEOz"));function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(a.get||a.set){Object.defineProperty(t,r,a)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(e){return e&&e.__esModule?e:{default:e}}var n=s.default.once(function(i){(0,c.default)(i).bind({started:function e(t){if(!n()){return}var r=i.liveEditor;var a=r.editor;i.userScratchpad.setChallengeTimeTaken();i.userScratchpad.startInactivityTimer();a.on("change",function(){(0,c.default)("#save-progress-text").stop(true).show().text(i18n._("Guardando avances..."));d()});(0,c.default)("#edit-title").hide();(0,c.default)(".title-box").css("cursor","auto");i.liveEditor.markDirty()},startCodeOver:function e(t){if(o()&&i.challenge){window.setTimeout(function(){i.challenge.startOver()},100)}},initCode:function e(t,r){if(o()){r.code=i.userScratchpad.get("stashedCode")}},runCode:function e(t,r){if(r.validate){r.validate=i.scratchpad.get("translatedTests")}},update:function e(t,r){if(r.results&&r.results.tests&&n()&&i.challenge){i.challenge.processResults(r.results)}},remove:function e(){var t={};if(o()){t=i.userScratchpad.setChallengeTimeTaken()}r(t)},beforeunload:function e(t,r){if(o()){var a=i.liveEditor.editor.text();if(a!==i.userScratchpad.get("stashedCode")){r.warnMsg=r.defaultMsg}}}});var n=function e(){return i.scratchpad.isChallenge()};var o=function e(){return i.isAttemptingSomething()&&n()};var a=function e(t){if(o()){i.$el.find("#save-progress-text").text(t)}};var r=function e(t){if(!o()){return}var r={success:function e(){a(i18n._("Todos los cambios guardados."))},error:function e(){a(i18n._("Error al guardar los cambios."))},attrs:t||{}};i.stashUserCode(r);i.userScratchpad.startInactivityTimer()};var d=s.default.debounce(r,3e3)});var o={bindEvents:n};t.default=o}}]);
//# sourceMappingURL=../../sourcemaps/en/a4c9f2c8346f59d92cd55f183d0fda98.ffb679094725506638a3.js.map