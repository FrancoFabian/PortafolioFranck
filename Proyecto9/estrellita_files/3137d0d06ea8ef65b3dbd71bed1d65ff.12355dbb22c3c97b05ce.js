(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["3137d0d06ea8ef65b3dbd71bed1d65ff"],{"/BnC":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=[{username:"testadmin",password:"khan1",bio:"has all permissions and capabilities"},{username:"testchild",password:"khan1",bio:"a spawned child of testcoach"},{username:"testcoach",password:"khan1",bio:"a google-user coach of teststudent and testchild"},{username:"testcreator",password:"khan1",bio:"has creator capabilities"},{username:"testcurator",password:"khan1",bio:"has curator capabilities"},{username:"testmaybestudent",password:"khan1",bio:"a user testcoach requested to coach"},{username:"testmoderator",password:"khan1",bio:"has moderator permissions; coaches testcoach/teststudent"},{username:"testnweasupporter",password:"khan1",bio:"has the permissions of nwea support staff"},{username:"testpublisher",password:"khan1",bio:"has curator and publish capabilities"},{username:"testspanishcurator",password:"khan1",bio:"has curator capabilities for es only"},{username:"teststudent",password:"khan1",bio:"a spawned coachee of testcoach"},{username:"teststudent2",password:"khan1",bio:"a non-spawned coachee testcoach and teststudent"},{username:"testunverified",password:"khan1",bio:'an unverified user with the "resend email" banner notification'},{username:"testunverified2",password:"khan1",bio:'an unverified user with the "change email" banner notification'}];t.default=n},"9x/I":function(e,t,r){"use strict";r("ma9I");r("5DmW");r("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var c=s(r("wd/R"));var v=r("mR6N");var h=o(r("q1tI"));var b=r("Vxy9");var d=o(r("ZpD3"));var g=s(r("etw9"));var n=o(r("6OHE"));var f=s(r("Q8Wn"));var a=s(r("wF1t"));var p=s(r("HYhL"));var i=s(r("mkzS"));var y=s(r("Yq32"));var w=s(r("m+8x"));var E=s(r("YmN9"));var S=s(r("Bf4f"));var O=s(r("3sfC"));var k=s(r("bMB9"));var i18n=o(r("HEOz"));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function m(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);return e}function P(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return j(e)}function C(e){C=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return C(e)}function j(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function B(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)F(e,t)}function F(e,t){F=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return F(e,t)}function N(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var D=i18n._("Por favor introduce una fecha de nacimiento v\u00e1lida.");var I=function e(t,r){var n=c.default.utc().subtract(13,"years");return c.default.utc(t,"YYYY-MM-DD")>n&&r==="learner"};var M=function(e){B(i,e);function i(){var e;var a;u(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}a=P(this,(e=C(i)).call.apply(e,[this].concat(r)));N(j(a),"state",{birthdate:a.props.birthdate||"",birthdateError:"",birthdateFieldInFocus:false,serverError:null});N(j(a),"updateBirthdateFromDateInput",function(e){a.setState({birthdate:e.target.value,birthdateError:""})});N(j(a),"validateBirthdateFromDateInput",function(e){var t=e.target.value;var r=t&&(0,c.default)(t,"YYYY-MM-DD");if(r&&r.isAfter()){a.setState({birthdateError:D})}});N(j(a),"updateBirthdateFromDatepicker",function(e){if(e){if(e.isAfter()){a.setState({birthdateError:D})}else{var t=e.locale("en").format("YYYY-MM-DD");a.setState({birthdate:t,birthdateError:""})}}});N(j(a),"handleEmailClick",function(e){var t=a.props.role;var r=a.state.birthdate;var n=I(r,t);d.markMinorConversions([{id:"signup_email_button_clicked"}]);a.props.onBirthdateChange(r,n);a.props.updateStep("identify")});return a}m(i,[{key:"componentDidUpdate",value:function e(t,r){var n=r.birthdate!==this.state.birthdate;if(n&&!this.state.birthdateError){d.markMinorConversions([{id:"signup_birthdate_filled",extra:{isIOS:f.default.isIOS}}])}}},{key:"showSignupButtons",value:function e(){if(this.props.role!=="learner"){return true}return!!(this.state.birthdate&&!this.state.birthdateError)}},{key:"setBirthdateFieldInFocus",value:function e(t){if(t){d.markMinorConversions([{id:"signup_birthdate_focused",extra:{isIOS:f.default.isIOS}}])}this.setState({birthdateFieldInFocus:t})}},{key:"maybeRenderSignupButtons",value:function e(){var r=this;var t=this.props,n=t.continueUrl,a=t.role,i=t.classCodes,o=t.showFacebookButton,s=t.flag,u=t.flagLoading;var l=this.state,c=l.birthdate,d=l.serverError;var f=I(c,a);var p=!u&&s&&a==="teacher";if(!this.showSignupButtons()){return null}var m=f&&!i;return h.createElement("div",{className:(0,v.css)(R.buttons)},!m&&h.createElement("div",{className:(0,v.css)(O.default.signupButtonWrapper)},h.createElement(E.default,{width:"100%",size:"large",role:a,postLoginContinueUrl:n,minorConversions:[{id:"signup_google_button_clicked"}],classCodes:i,birthdate:c,onError:function e(t){r.setState({serverError:t})}})),p&&h.createElement("div",{className:(0,v.css)(O.default.signupButtonWrapper)},h.createElement(k.default,{width:"100%",size:"large",isLogin:false})),!f&&o&&h.createElement("div",{className:(0,v.css)(O.default.signupButtonWrapper)},h.createElement(w.default,{width:"100%",size:"large",role:a,postLoginContinueUrl:n,minorConversions:[{id:"signup_facebook_button_clicked"}],classCodes:i,onError:function e(t){r.setState({serverError:t})}})),!f&&h.createElement("div",{className:(0,v.css)(O.default.signupButtonWrapper)},h.createElement(y.default,{width:"100%",size:"large",role:a,postLoginContinueUrl:n,minorConversions:[{id:"signup_apple_button_clicked"}],classCodes:i,onError:function e(t){if(t&&t.error==="popup_blocked_by_browser"){r.setState({serverError:i18n._("Tu navegador bloque\u00f3 una ventana emergente necesaria para iniciar sesi\u00f3n. Por favor, cambia la configuraci\u00f3n de tu navegador para permitir ventanas emergentes de khanacademy.org.")})}else{r.setState({serverError:i18n._("Error al iniciar sesi\u00f3n. Por favor int\u00e9ntalo nuevamente.")})}}})),h.createElement("div",{className:(0,v.css)(O.default.signupButtonWrapper)},h.createElement(g.default,{title:f?i18n._("Reg\u00edstrate: elegir un nombre de usuario"):i18n._("Reg\u00edstrate con tu correo electr\u00f3nico"),testId:"sign-up-with-email-button",width:"100%",size:"large",iconComponent:f?null:S.default,onClick:this.handleEmailClick})),d&&h.createElement(b.Body,{tag:"p",role:"alert",style:O.default.fieldError},d))}},{key:"render",value:function e(){var r=this;var t=this.state,n=t.birthdate,a=t.birthdateError;var i=this.props.role;var o=!this.state.birthdateFieldInFocus&&a;var s=(0,c.default)();var u=(0,c.default)().subtract(120,"years");var l=f.default.isIOS?h.createElement("input",{type:"date",min:u.format("YYYY-MM-DD"),max:s.format("YYYY-MM_DD"),className:(0,v.css)(R.dateInput,o&&O.default.errorInput),value:n,onFocus:function e(t){return r.setBirthdateFieldInFocus(true)},onChange:function e(t){r.updateBirthdateFromDateInput(t);r.validateBirthdateFromDateInput(t)},onBlur:function e(t){r.setBirthdateFieldInFocus(false);r.validateBirthdateFromDateInput(t)}}):h.createElement("div",{className:(0,v.css)(a&&O.default.errorInput)},h.createElement(p.default,{appearance:"blue-mountain",defaultValue:this.state.birthdate,onChange:this.updateBirthdateFromDatepicker,onFocus:function e(t){d.markMinorConversions([{id:"signup_birthdate_focused",extra:{isIOS:f.default.isIOS}}])},reportNull:false,showTitles:true}));return h.createElement("div",null,h.createElement("div",{className:(0,v.css)(i==="learner"?R.birthdayPickerWrapper:R.invisibleBirthdayPickerWrapper)},h.createElement("div",{className:(0,v.css)(O.default.label)},h.createElement("div",{className:(0,v.css)(R.birthdayPickerPrompt)},i18n._("\u00bfCu\u00e1l es tu fecha de nacimiento?")),l,h.createElement("div",{className:(0,v.css)(O.default.fieldRequirement,a?O.default.fieldError:O.default.hiddenFieldError)},a))),this.maybeRenderSignupButtons())}}]);return i}(h.Component);N(M,"defaultProps",{under13:false,role:"learner",showFacebookButton:true});var Y=40;var R=v.StyleSheet.create({birthdayPickerWrapper:{display:"block",marginBottom:8,height:95},invisibleBirthdayPickerWrapper:{height:0,opacity:0,visibility:"hidden",overflow:"hidden"},birthdayPickerPrompt:{marginBottom:4},dateInput:{height:Y,fontSize:i.default.BODY_FONT_SIZE,border:"1px solid ".concat(n.colors.gray85),borderRadius:n.borderRadius,minWidth:"50%",outline:"none",":focus":{borderColor:n.colors.kaGreen}},buttons:{animationName:{from:{opacity:0},to:{opacity:1}},animationDuration:"500ms"},login:{marginTop:24,marginBottom:72,textAlign:"center",fontSize:i.default.BODY_FONT_SIZE,color:n.colors.kaGreen},link:{":hover":{textDecoration:"none",color:n.colors.kaGreenHover}}});var L=(0,a.default)({name:"districts_clever_library_active"})(M);t.default=L},QuFw:function(e,t,r){"use strict";r("ma9I");r("5DmW");r("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=v(r("q1tI"));var s=r("mR6N");var n=i(r("SGU3"));var u=i(r("Yq32"));var l=i(r("m+8x"));var c=i(r("YmN9"));var a=i(r("S52b"));var d=i(r("JKja"));var f=i(r("3sfC"));var p=i(r("bMB9"));var m=i(r("IH/d"));var i18n=v(r("HEOz"));function i(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function g(e,t,r){if(t)b(e.prototype,t);if(r)b(e,r);return e}function y(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return E(e)}function w(e){w=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return w(e)}function E(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function S(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)O(e,t)}function O(e,t){O=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return O(e,t)}function k(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var P=function(e){S(i,e);function i(){var e;var t;h(this,i);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++){n[a]=arguments[a]}t=y(this,(e=w(i)).call.apply(e,[this].concat(n)));k(E(t),"state",{serverError:null});k(E(t),"handleSignupClick",function(e){e.preventDefault();t.props.updateStep("intro")});return t}g(i,[{key:"renderOAuthButtons",value:function e(){var r=this;var t=this.props,n=t.classCodes,a=t.continueUrl,i=t.role;return o.createElement("div",{className:(0,s.css)(C.buttons)},o.createElement("div",{className:(0,s.css)(f.default.signupButtonWrapper)},o.createElement(c.default,{width:"100%",size:"large",role:i,postLoginContinueUrl:a,classCodes:n,minorConversions:[{id:"login_google_button_clicked"}],onError:function e(t){r.setState({serverError:t})}})),o.createElement(m.default,null,o.createElement("div",{className:(0,s.css)(f.default.signupButtonWrapper)},o.createElement(p.default,{width:"100%",size:"large",isLogin:true,postLoginContinueUrl:a}))),o.createElement("div",{className:(0,s.css)(f.default.signupButtonWrapper)},o.createElement(l.default,{width:"100%",size:"large",role:i,postLoginContinueUrl:a,classCodes:n,minorConversions:[{id:"login_facebook_button_clicked"}],onError:function e(t){r.setState({serverError:t})}})),o.createElement("div",{className:(0,s.css)(f.default.signupButtonWrapper)},o.createElement(u.default,{size:"large",width:"100%",role:i,classCodes:n,postLoginContinueUrl:a,minorConversions:[{id:"login_apple_button_clicked"}],onError:function e(t){if(t&&t.error==="popup_blocked_by_browser"){r.setState({serverError:i18n._("Tu navegador bloque\u00f3 una ventana emergente necesaria para iniciar sesi\u00f3n. Por favor, cambia la configuraci\u00f3n de tu navegador para permitir ventanas emergentes de khanacademy.org.")})}else{r.setState({serverError:i18n._("Error al iniciar sesi\u00f3n. Por favor int\u00e9ntalo nuevamente.")})}}})))}},{key:"renderSignupButton",value:function e(){return o.createElement("div",{className:(0,s.css)(C.signup)},o.createElement(n.default,{href:"/signup",onClick:this.handleSignupClick},i18n._("Crear una cuenta")))}},{key:"render",value:function e(){var t=this.props,r=t.previousStep,n=t.updateStep;return o.createElement(d.default,{showBackButton:!!r,onBackClick:r&&function(){return n(r)}},this.renderOAuthButtons(),o.createElement(a.default,{classCodes:this.props.classCodes,continueUrl:this.props.continueUrl,serverError:this.state.serverError}),this.renderSignupButton())}}]);return i}(o.Component);k(P,"defaultProps",{role:"learner"});var C=s.StyleSheet.create({buttons:{marginBottom:40},signup:{marginTop:24,marginBottom:72,textAlign:"center"}});var j=P;t.default=j},S52b:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("2B1R");r("+2oP");r("5DmW");r("NBAS");r("EnZy");r("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var a=w(r("q1tI"));var o=r("mR6N");var n=r("vwLt");var s=y(r("Nw73"));var u=y(r("Pwnf"));var l=y(r("SGU3"));var c=y(r("Q8Wn"));var i=y(r("4Du/"));var d=y(r("3sfC"));var f=y(r("WjuW"));var p=y(r("SW+Y"));var m=r("WGxL");var v=r("x2Mf");var h=r("sPtk");var b=r("Y8R6");var g=y(r("/BnC"));var i18n=w(r("HEOz"));function y(e){return e&&e.__esModule?e:{default:e}}function w(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function E(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){N(t,e,r[e])})}return t}function S(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function k(e,t,r){if(t)O(e.prototype,t);if(r)O(e,r);return e}function P(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return j(e)}function C(e){C=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return C(e)}function j(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function B(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)F(e,t)}function F(e,t){F=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return F(e,t)}function N(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var D={identifierMissing:i18n._("Un correo electr\u00f3nico o nombre de usuario es necesario para iniciar sesi\u00f3n. Tambi\u00e9n puedes iniciar sesi\u00f3n con Google o Facebook."),passwordMissing:i18n._("Se requiere una contrase\u00f1a para iniciar sesi\u00f3n.")};var I=function(e){B(i,e);function i(){var e;var a;S(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}a=P(this,(e=C(i)).call.apply(e,[this].concat(r)));N(j(a),"state",{credentials:{},serverError:a.props.serverError||null,isSubmitting:false});N(j(a),"doLogin",function(e){var t=a.props.classCodes;var r=a.state.isSubmitting;if(r){return}a.setState({isSubmitting:true});var n=(0,m.getcontinueUrlFromQueryString)()||a.props.continueUrl||null;(0,v.loginWithPassword)({identifier:e.identifier,password:e.password,signupCodes:t}).then(function(e){var t=(0,h.calculateNextUrl)({location:a.props.location,userData:e.user,loginType:"password",continueUrl:n||"/",isFirstLogin:e.isFirstLogin,joinClassrooms:e.joinClassrooms});(0,b.redirect)(t)}).catch(function(e){if(a.usernameInputField){a.usernameInputField.focus()}var t=(0,v.getErrorMessageByCode)(e.message);a.setState({isSubmitting:false,serverError:t})})});N(j(a),"handleDevSubmit",function(e){var t=e.split(":");var r=t[0];var n=t.slice(1).join(":");a.doLogin({identifier:r,password:n})});N(j(a),"handleSubmit",function(e){if(a.state.isSubmitting){return}e.preventDefault();var t=a.getCredentials();if(t){a.doLogin(t)}});return a}k(i,[{key:"componentDidUpdate",value:function e(t){if(t.serverError!==this.props.serverError){this.setState({serverError:this.props.serverError})}}},{key:"getCredentials",value:function e(){var t=this.state.credentials,r=t.identifier,n=t.password;if(r&&n){return{identifier:r,password:n}}return null}},{key:"renderLoginButtonText",value:function e(){var t=this.state.isSubmitting;return t?i18n._("Iniciando tu sesi\u00f3n..."):i18n._("Iniciar sesi\u00f3n")}},{key:"maybeRenderDevUsers",value:function e(){if(!c.default.IS_DEV_SERVER){return null}var t=g.default.map(function(e){return a.createElement(n.OptionItem,{key:e.username,label:"".concat(e.username,": ").concat(e.bio),value:"".concat(e.username,":").concat(e.password)})});return a.createElement("div",null,a.createElement(n.SingleSelect,{onChange:this.handleDevSubmit,placeholder:"OR log in as an existing user:"},t))}},{key:"renderLoginForm",value:function e(){var n=this;var t=this.state.serverError;return a.createElement(a.Fragment,null,a.createElement("div",{role:"alert",className:(0,o.css)(d.default.fieldRequirement,M.serverError,d.default.fieldError)},t),a.createElement(f.default,{testId:"identifier",label:i18n._("Correo electr\u00f3nico o nombre de usuario"),emptyMessage:D.identifierMissing,onSubmit:this.handleSubmit,onValidation:function e(t,r){return n.setState({credentials:E({},n.state.credentials,{identifier:t?r:null})})},innerRef:function e(t){return n.usernameInputField=t}}),a.createElement(p.default,{testId:"password",emptyMessage:D.passwordMissing,label:i18n._("Contrase\u00f1a"),onSubmit:this.handleSubmit,onValidation:function e(t,r){return n.setState({credentials:E({},n.state.credentials,{password:t?r:null})})}}),a.createElement(l.default,{href:"/forgotpw"},i18n._("\u00bfOlvidaste tu contrase\u00f1a?")),a.createElement(s.default,{width:"100%",size:"large",color:u.default.blue,onClick:this.handleSubmit,disabled:!this.getCredentials(),testId:"log-in-submit-button"},this.renderLoginButtonText()))}},{key:"render",value:function e(){return a.createElement(a.Fragment,null,this.maybeRenderDevUsers(),this.renderLoginForm())}}]);return i}(a.Component);var M=o.StyleSheet.create({serverError:{minHeight:24,lineHeight:"24px"}});var Y=(0,i.default)(I);t.default=Y},radk:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("5DmW");r("NBAS");r("07d7");r("JfAA");r("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var u=S(r("q1tI"));var n=r("mR6N");var a=r("Pk2J");var i=r("JimW");var o=E(r("Pwnf"));var s=r("Vxy9");var l=E(r("JKja"));var c=E(r("P6bW"));var d=E(r("DvtR"));var f=E(r("SW+Y"));var p=E(r("zdYe"));var m=E(r("RNI6"));var v=r("WGxL");var h=E(r("wF1t"));var b=E(r("4Du/"));var g=r("Y8R6");var y=r("vAdI");var w=r("sPtk");var i18n=S(r("HEOz"));function E(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function O(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){I(t,e,r[e])})}return t}function k(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function C(e,t,r){if(t)P(e.prototype,t);if(r)P(e,r);return e}function j(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return F(e)}function B(e){B=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return B(e)}function F(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function N(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)D(e,t)}function D(e,t){D=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return D(e,t)}function I(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var M=function e(t){var r=function e(t){return u.createElement("span",{dangerouslySetInnerHTML:{__html:t}})};var n={};for(var a=0,i=["username","email","password"];a<i.length;a++){var o=i[a];var s=o+"_html";if(t[o]){n[o]=t[o].toString()}if(t[s]){n[o]=r(t[s])}}return n};var Y=function(e){N(a,e);function a(){var e;var o;k(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}o=j(this,(e=B(a)).call.apply(e,[this].concat(r)));I(F(o),"state",{errorMessage:null,fields:{},fieldErrors:{},isRedirecting:false,isSubmitting:false,serverError:false});I(F(o),"handleEmailSignupSuccess",function(e){var t=o.props,r=t.onEmailSignupSuccess,n=t.referral,a=t.classCodes;if(r){r()}(0,g.redirect)((0,m.default)({type:"password",continueUrl:e,referral:n,classCodes:a}))});I(F(o),"handleBackClick",function(e){o.props.updateStep(o.props.previousStep)});I(F(o),"handleSubmit",function(e){e.preventDefault();o.submitForm()});I(F(o),"handleProceedClick",function(e){e.preventDefault();o.submitForm()});I(F(o),"validationHandler",function(n,a){return function(e,t){var r=e?t:null;o.setState({fields:O({},o.state.fields,n(r)),fieldErrors:O({},o.state.fieldErrors,a?a(r):{})})}});I(F(o),"doSignupNew",function(e,r){var t=o.props,n=t.birthdate,a=t.role,i=t.classCodes;if(!e.under13){(0,y.signupWithPassword)({password:e.fields.password,signupCodes:i,birthdate:n,role:a,email:e.fields.email,firstname:e.fields.firstName,lastname:e.fields.lastName}).then(function(e){var t=(0,w.calculateNextUrl)({location:o.props.location,userData:e.user,loginType:"password",continueUrl:r,isFirstLogin:true,joinClassrooms:e.joinClassrooms});(0,g.redirect)(t);o.setState({isRedirecting:true})}).catch(function(e){var t=(0,y.getErrorMessageByCode)(e.message);o.setState({isSubmitting:false,isRedirecting:false,errorMessage:t})})}else{(0,y.signupUnderAgeGate)({parentEmail:e.fields.email,username:e.fields.username,password:e.fields.password,birthdate:n,signupCodes:i}).then(function(e){if(e){var t=(0,w.calculateNextUrl)({location:o.props.location,userData:e.user,loginType:"password",continueUrl:r,isFirstLogin:true,joinClassrooms:e.joinClassrooms});(0,g.redirect)(t);o.setState({isRedirecting:true})}}).catch(function(e){var t=(0,y.getSignupUnderAgeGateErrorMessageByCode)(e.message);o.setState({isSubmitting:false,isRedirecting:false,errorMessage:t})})}o.setState({isSubmitting:true,serverError:false})});return o}C(a,[{key:"getSubmission",value:function e(){var t=this.state.fields,r=t.email,n=t.firstName,a=t.lastName,i=t.password,o=t.username;var s=this.props,u=s.under13,l=s.classCodes;if(!u&&r&&n&&a&&i){return{under13:u,fields:{email:r,firstName:n,lastName:a,password:i}}}if(u&&o&&i){if(l){return{fields:{username:o,password:i,email:""},under13:u}}if(r){return{fields:{username:o,password:i,email:r},under13:u}}}return null}},{key:"submitForm",value:function e(){var r=this;var t=this.getSubmission();if(t===null){return}var n=this.props,a=n.birthdate,i=n.role,o=n.referral,s=n.classCodes;var u=(0,v.getcontinueUrlFromQueryString)()||this.props.continueUrl||null;if(this.props.flag){return this.doSignupNew(t,u||"/")}var l=s?s.join(","):"";var c={password:t.fields.password,classCodes:l,continue:u,birthdate:a,referral:o};var d=t.under13?(0,v.signupUnder13)(O({},c,{parent_email:t.fields.email,username:t.fields.username})):(0,v.signup)(O({},c,{email:t.fields.email,firstname:t.fields.firstName,lastname:t.fields.lastName,role:i}));d.then(function(e){r.handleEmailSignupSuccess(e.continueUrl);r.setState({isRedirecting:true})}).catch(function(e){if(e&&e.errors){var t=M(e.errors);if(Object.keys(t).length===0){r.setState({serverError:true})}r.setState({fieldErrors:t})}r.setState({isSubmitting:false})});this.setState({isSubmitting:true,serverError:false})}},{key:"renderNameFields",value:function e(){return u.createElement("div",{className:(0,n.css)(R.nameFields)},u.createElement("div",{className:(0,n.css)(R.nameFieldWrapper)},u.createElement(d.default,{testId:"signup-first-name-field",nameType:"first",onValidation:this.validationHandler(function(e){return{firstName:e}}),onSubmit:this.handleSubmit})),u.createElement("div",{className:(0,n.css)(R.nameFieldWrapper)},u.createElement(d.default,{testId:"signup-last-name-field",nameType:"last",onValidation:this.validationHandler(function(e){return{lastName:e}}),onSubmit:this.handleSubmit})))}},{key:"maybeRenderServerError",value:function e(){var t=this.state,r=t.errorMessage,n=t.serverError;var a=this.props.flag;if(n&&!a){return i18n._("Lo sentimos, \u00a1hay un error inesperado! Por favor Int\u00e9nta m\u00e1s tarde.")}if(r&&a){return u.createElement(i.View,{style:R.error},u.createElement(s.Body,{tag:"p",testId:"error-message"},r))}return null}},{key:"renderProceedButtonLabel",value:function e(){var t=this.state,r=t.isRedirecting,n=t.isSubmitting;if(r){return i18n._("Iniciando tu sesi\u00f3n...")}if(n){return i18n._("Iniciando sesi\u00f3n\u2026")}return i18n._("Reg\u00edstrate")}},{key:"renderEmailFieldLabel",value:function e(){var t=this.props.under13;if(t){return i18n._("El correo electr\u00f3nico de uno de tus padres o de tu tutor legal")}return i18n._("Tu correo electr\u00f3nico")}},{key:"renderEmailFieldNotice",value:function e(){var t=this.props.under13;if(t){return i18n._("Nos alegra que empieces, pero necesitamos notificar a un padre o guardi\u00e1n sobre tu cuenta.")}return null}},{key:"render",value:function e(){var t=this.props,r=t.under13,n=t.classCodes;var a=this.state,i=a.fieldErrors,o=a.isSubmitting;var s=r&&n;return u.createElement(l.default,{showBackButton:true,onBackClick:this.handleBackClick,showProceedButton:true,proceedLabel:this.renderProceedButtonLabel(),proceedDisabled:!this.getSubmission()||o,onProceedClick:this.handleProceedClick},!s&&u.createElement(c.default,{testId:"signup-email-field",label:this.renderEmailFieldLabel(),notice:this.renderEmailFieldNotice(),error:i.email,onValidation:this.validationHandler(function(e){return{email:e}},function(){return{email:null}}),onSubmit:this.handleSubmit}),r?u.createElement(p.default,{testId:"signup-username-field",error:i.username,onValidation:this.validationHandler(function(e){return{username:e}},function(){return{username:null}}),onSubmit:this.handleSubmit}):this.renderNameFields(),u.createElement(f.default,{testId:"signup-password-field",isCreating:true,error:i.password,onValidation:this.validationHandler(function(e){return{password:e}},function(){return{password:null}}),onSubmit:this.handleSubmit}),this.maybeRenderServerError())}}]);return a}(u.Component);I(Y,"defaultProps",{previousStep:"intro"});var R=n.StyleSheet.create({error:{color:o.default.red},nameFields:{display:"flex",alignItems:"top"},nameFieldWrapper:{width:"50%",":first-of-type":{marginRight:4},":last-of-type":{marginLeft:4}}});var L=(0,a.compose)(b.default,(0,h.default)({name:"new_signup"}))(Y);t.default=L}}]);
//# sourceMappingURL=../../sourcemaps/en/3137d0d06ea8ef65b3dbd71bed1d65ff.1a66c8e2b640b5b919a1.js.map